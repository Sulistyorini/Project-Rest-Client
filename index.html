<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Unsplash Gallery ‚Äî Demo</title>

    <!-- Bootstrap CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />

    <style>
      :root {
        --brand: #7fbcd6;
      }
      body {
        background: #f5f7f8;
        font-family: system-ui, -apple-system, "Segoe UI", Roboto,
          "Helvetica Neue", Arial;
      }

      /* Header / navbar */
      .brand-title {
        font-weight: 700;
        color: #5aa6c9;
        font-size: 1.6rem;
        letter-spacing: 0.2px;
      }
      .hero {
        background: linear-gradient(
          180deg,
          rgba(167, 212, 226, 1) 0%,
          rgba(127, 188, 214, 1) 100%
        );
        color: #fff;
        padding: 56px 0 48px;
        border-bottom-left-radius: 70px;
        border-bottom-right-radius: 70px;
        margin-bottom: 30px;
      }
      .hero .stat {
        font-size: 2.6rem;
        font-weight: 800;
      }
      .hero .label {
        font-size: 1rem;
        opacity: 0.95;
      }

      /* Gallery */
      .card-img-top {
        height: 220px;
        object-fit: cover;
      }

      .photographer {
        font-size: 0.9rem;
        color: #333;
      }

      /* search bar */
      .search-input {
        min-width: 280px;
      }

      /* small screens tweak */
      @media (max-width: 576px) {
        .hero .stat {
          font-size: 1.6rem;
        }
        .hero {
          padding: 32px 0;
          border-bottom-left-radius: 40px;
          border-bottom-right-radius: 40px;
        }
      }
    </style>
  </head>
  <body>
    <!-- NAVBAR -->
    <nav class="navbar navbar-expand-lg bg-white shadow-sm py-3">
      <div class="container">
        <div class="d-flex align-items-center gap-3">
          <!-- local uploaded image used as small logo (developer-provided file path) -->
          <img
            src="/mnt/data/afcabe7b-ee77-4d54-9780-3f583fca31ea.png"
            alt="logo"
            style="height: 38px; width: auto; object-fit: contain"
          />
          <div class="brand-title">Unsplash Gallery</div>
        </div>

        <button
          class="navbar-toggler"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#navMenu"
        >
          <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navMenu">
          <ul class="navbar-nav ms-auto align-items-center">
            <li class="nav-item me-2">
              <a
                class="nav-link active btn btn-light rounded-pill px-4"
                href="#"
                id="btnHome"
                >Home</a
              >
            </li>
            <li class="nav-item me-2">
              <a class="nav-link" href="#" id="btnSearchTab">Search</a>
            </li>
            <li class="nav-item me-2">
              <a class="nav-link" href="#" id="btnTrending">Trending</a>
            </li>
            <li class="nav-item ms-3">
              <input
                id="searchInput"
                class="form-control search-input"
                placeholder="Search photos (e.g. nature)"
              />
            </li>
            <li class="nav-item ms-2">
              <button id="searchBtn" class="btn btn-primary">Search</button>
            </li>
          </ul>
        </div>
      </div>
    </nav>

    <!-- HERO -->
    <section class="hero">
      <div class="container">
        <div class="row text-center">
          <div class="col-md-3">
            <div class="stat" id="statPhotos">‚Äî</div>
            <div class="label">Photos</div>
          </div>
          <div class="col-md-3">
            <div class="stat" id="statPhotographers">‚Äî</div>
            <div class="label">Photographers</div>
          </div>
          <div class="col-md-3">
            <div class="stat" id="statDownloads">‚Äî</div>
            <div class="label">Downloads</div>
          </div>
        </div>
      </div>
    </section>

    <!-- MAIN -->
    <main class="container mb-5">
      <div class="d-flex justify-content-between align-items-center mb-4">
        <h2 class="h3">Featured Categories</h2>
        <small class="text-muted">Click a category to load images</small>
      </div>

      <div class="row mb-4 g-3">
        <div class="col-sm-6 col-md-3">
          <button
            class="btn btn-light w-100 text-start category-btn"
            data-category="nature"
          >
            üåø Nature
          </button>
        </div>
        <div class="col-sm-6 col-md-3">
          <button
            class="btn btn-light w-100 text-start category-btn"
            data-category="architecture"
          >
            üèõÔ∏è Architecture
          </button>
        </div>
        <div class="col-sm-6 col-md-3">
          <button
            class="btn btn-light w-100 text-start category-btn"
            data-category="food"
          >
            üçΩÔ∏è Food
          </button>
        </div>
        <div class="col-sm-6 col-md-3">
          <button
            class="btn btn-light w-100 text-start category-btn"
            data-category="technology"
          >
            üíª Technology
          </button>
        </div>
      </div>

      <!-- gallery grid -->
      <div id="gallery" class="row g-3">
        <!-- cards inserted here -->
      </div>

      <!-- load more -->
      <div class="text-center mt-4">
        <button id="loadMoreBtn" class="btn btn-outline-primary">
          Load more
        </button>
      </div>

      <!-- footer / attribution note -->
      <div class="mt-4 text-muted small">
        Photos provided by Unsplash API. Photographer attribution required ‚Äî
        click image to open on Unsplash.
      </div>
    </main>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

    <script>
      /*****************************************************************
       *  Unsplash API demo (frontend)
       *  - Replace ACCESS_KEY with your Unsplash Access Key (Client ID)
       *  - Do NOT put your Secret Key here
       *
       *  Usage:
       *   1) Create app at https://unsplash.com/oauth/applications
       *   2) Copy Access Key and paste below
       *****************************************************************/
      // ganti dengan Access Key Anda (pastikan berada di dalam tanda kutip)
      const ACCESS_KEY = "cHBUf0Cq9e22fYEcsXIXmPlJ5n2EVpU6al2OfoYtSrQ"; // <-- REPLACE THIS

      if (
        !ACCESS_KEY ||
        ACCESS_KEY.trim() === "" ||
        ACCESS_KEY.includes("cHBUf0Cq9e22fYEcsXIXmPlJ5n2EVpU6al2OfoYtSrQ")
      ) {
        console.warn(
          "Unsplash Access Key missing. Please put your Access Key in the ACCESS_KEY variable."
        );
      }

      // state
      let currentQuery = "";
      let currentPage = 1;
      const perPage = 12;
      let lastEndpoint = "trending"; // trending | search | category

      const galleryEl = document.getElementById("gallery");
      const loadMoreBtn = document.getElementById("loadMoreBtn");
      const searchInput = document.getElementById("searchInput");
      const searchBtn = document.getElementById("searchBtn");
      const btnTrending = document.getElementById("btnTrending");
      const btnHome = document.getElementById("btnHome");
      const categoryButtons = document.querySelectorAll(".category-btn");

      // helper: build headers for Unsplash requests
      function unsplashHeaders() {
        // Unsplash recommends Authorization: Client-ID <ACCESS_KEY>
        return {
          Authorization: "Client-ID " + ACCESS_KEY,
          "Accept-Version": "v1",
        };
      }

      // fetch basic stats (approx) - note: Unsplash no direct total counts endpoint for public,
      // so we will show placeholders or counts inferred from first response.
      async function loadStats() {
        try {
          // We'll fetch one page of photos and use some sample numbers
          const res = await fetch(
            `https://api.unsplash.com/photos?page=1&per_page=1&client_id=${ACCESS_KEY}`,
            { headers: unsplashHeaders() }
          );
          if (!res.ok) throw res;
          // We can't get global totals easily; set friendly static numbers to match UI feel
          document.getElementById("statPhotos").innerText = "3M+";
          document.getElementById("statPhotographers").innerText = "200K+";
          document.getElementById("statDownloads").innerText = "10M+";
        } catch (err) {
          console.warn(
            "Could not load stats (rate limit or missing key). Using default values."
          );
          document.getElementById("statPhotos").innerText = "‚Äî";
          document.getElementById("statPhotographers").innerText = "‚Äî";
          document.getElementById("statDownloads").innerText = "‚Äî";
        }
      }

      // render a single photo card
      function renderPhotoCard(photo) {
        const col = document.createElement("div");
        col.className = "col-sm-6 col-md-4 col-lg-3";

        // card
        const card = document.createElement("div");
        card.className = "card shadow-sm h-100";

        // image anchor -> open unsplash
        const anchor = document.createElement("a");
        anchor.href =
          photo.links.html + "?utm_source=your_app_name&utm_medium=referral"; // attribution param
        anchor.target = "_blank";
        anchor.rel = "noopener noreferrer";

        const img = document.createElement("img");
        img.className = "card-img-top";
        img.alt =
          photo.alt_description || photo.description || "Unsplash photo";
        img.src = photo.urls.small;

        anchor.appendChild(img);

        // card body
        const body = document.createElement("div");
        body.className = "card-body";

        const title = document.createElement("p");
        title.className = "mb-1 photographer";
        title.innerHTML = `üì∏ <strong><a href="${photo.user.links.html}?utm_source=your_app_name&utm_medium=referral" target="_blank" rel="noopener noreferrer">${photo.user.name}</a></strong>`;

        const likes = document.createElement("div");
        likes.className = "text-muted small";
        likes.innerText = `${photo.likes} ‚ô• ¬∑ ${photo.width}√ó${photo.height}`;

        body.appendChild(title);
        body.appendChild(likes);

        card.appendChild(anchor);
        card.appendChild(body);

        col.appendChild(card);

        return col;
      }

      // load photos (generic)
      async function loadPhotos({
        endpoint = "trending",
        query = "",
        page = 1,
        per_page = perPage,
      }) {
        if (
          !ACCESS_KEY ||
          ACCESS_KEY.trim() === "" ||
          ACCESS_KEY.includes("YOUR_UNSPLASH_ACCESS_KEY_HERE")
        ) {
          // fallback: use source.unsplash.com random images (no API)
          if (page === 1) galleryEl.innerHTML = "";
          for (let i = 0; i < per_page; i++) {
            const url = query
              ? `https://source.unsplash.com/collection/190727/${
                  800 + i
                }x600?${encodeURIComponent(query)}`
              : `https://source.unsplash.com/random/800x600?sig=${Math.random()}`;
            const fakePhoto = {
              links: { html: "https://unsplash.com" },
              urls: { small: url },
              alt_description: query || "Random image",
              user: {
                name: "Unsplash",
                links: { html: "https://unsplash.com" },
              },
              likes: "-",
              width: 800,
              height: 600,
            };
            galleryEl.appendChild(renderPhotoCard(fakePhoto));
          }
          return;
        }

        try {
          let url = "";
          if (endpoint === "search") {
            url = `https://api.unsplash.com/search/photos?page=${page}&per_page=${per_page}&query=${encodeURIComponent(
              query
            )}`;
          } else if (endpoint === "category") {
            // use search to simulate category
            url = `https://api.unsplash.com/search/photos?page=${page}&per_page=${per_page}&query=${encodeURIComponent(
              query
            )}`;
          } else {
            // trending / latest
            // order_by popular to show trending-like
            url = `https://api.unsplash.com/photos?page=${page}&per_page=${per_page}&order_by=popular`;
          }

          const res = await fetch(url, { headers: unsplashHeaders() });
          if (!res.ok) {
            const text = await res.text();
            throw new Error(`HTTP ${res.status} - ${text}`);
          }

          const data = await res.json();
          let photos = [];
          if (endpoint === "search" || endpoint === "category") {
            photos = data.results;
          } else {
            photos = data;
          }

          // append or replace based on page
          if (page === 1) galleryEl.innerHTML = "";
          photos.forEach((p) => galleryEl.appendChild(renderPhotoCard(p)));
        } catch (err) {
          console.error("Error loading photos:", err);
          if (page === 1) {
            galleryEl.innerHTML = `<div class="col-12"><div class="alert alert-warning">Tidak dapat mengambil data dari Unsplash API. Periksa Access Key atau jaringan. (${err.message})</div></div>`;
          }
        }
      }

      // events
      searchBtn.addEventListener("click", () => {
        const q = searchInput.value.trim();
        if (!q) return;
        currentQuery = q;
        currentPage = 1;
        lastEndpoint = "search";
        loadPhotos({
          endpoint: "search",
          query: currentQuery,
          page: currentPage,
        });
      });

      searchInput.addEventListener("keydown", (e) => {
        if (e.key === "Enter") searchBtn.click();
      });

      btnTrending.addEventListener("click", () => {
        currentPage = 1;
        lastEndpoint = "trending";
        loadPhotos({ endpoint: "trending", page: currentPage });
      });

      btnHome.addEventListener("click", () => {
        currentPage = 1;
        lastEndpoint = "trending";
        loadPhotos({ endpoint: "trending", page: currentPage });
      });

      categoryButtons.forEach((btn) => {
        btn.addEventListener("click", () => {
          const cat = btn.dataset.category;
          currentQuery = cat;
          currentPage = 1;
          lastEndpoint = "category";
          loadPhotos({ endpoint: "category", query: cat, page: currentPage });
        });
      });

      loadMoreBtn.addEventListener("click", () => {
        currentPage++;
        if (lastEndpoint === "search" || lastEndpoint === "category") {
          loadPhotos({
            endpoint: lastEndpoint,
            query: currentQuery,
            page: currentPage,
          });
        } else {
          loadPhotos({ endpoint: "trending", page: currentPage });
        }
      });

      // initial load
      (function init() {
        loadStats();
        loadPhotos({ endpoint: "trending", page: 1 });
      })();
    </script>
  </body>
</html>
